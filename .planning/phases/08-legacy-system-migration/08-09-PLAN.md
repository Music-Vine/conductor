---
phase: 08-legacy-system-migration
plan: 09
type: execute
wave: 4
depends_on: ["08-07", "08-08"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All proxy integration work has been visually and functionally verified"
    - "Smoke tests pass in mock mode"
    - "Decommission documentation is reviewed and complete"
    - "The app runs identically in mock mode (no regressions from proxy changes)"
  artifacts: []
  key_links: []
---

<objective>
Human verification checkpoint to confirm Phase 8 work is complete: proxy integration doesn't regress mock mode, smoke tests run, and documentation is ready.

Purpose: Final gate before declaring Phase 8 complete. Since this is an operational phase, the checkpoint focuses on verifying no regressions and documentation readiness.
Output: Verified Phase 8 completion.
</objective>

<execution_context>
@/Users/sambeevors/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sambeevors/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-legacy-system-migration/08-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run automated verification checks</name>
  <files></files>
  <action>
Run the following automated checks to confirm no regressions:

1. **Build check:** `npm run build` -- must pass with zero errors
2. **TypeScript check:** `npx tsc --noEmit` -- must pass
3. **Proxy coverage check:** Verify all non-auth route handlers have proxy integration:
   ```bash
   # Count route files with proxyToBackend import (should be 40, excluding auth/logout)
   grep -rl "proxyToBackend" src/app/api/ | wc -l
   ```
4. **Smoke test dry run:** `npx playwright test --list` -- should list all smoke tests
5. **Mock mode test:** Start the dev server and verify key pages still load correctly in mock mode:
   - Visit /dashboard
   - Visit /users
   - Visit /assets
   - Visit /contributors
   - Visit /payees
   - Visit /collections
   - Visit /activity
6. **Documentation check:** Verify all docs exist:
   ```bash
   ls docs/decommission/feature-parity-audit.md
   ls docs/decommission/jordans-admin.md
   ls docs/decommission/retool.md
   ls docs/decommission/musicvine-php.md
   ls docs/decommission/uppbeat-php.md
   ```
7. **Proxy.ts migration check:** Verify middleware.ts no longer exists:
   ```bash
   test ! -f src/middleware.ts && echo "OK: middleware.ts removed"
   test -f src/proxy.ts && echo "OK: proxy.ts exists"
   ```

Report all results.
  </action>
  <verify>All 7 checks pass</verify>
  <done>Automated verification confirms no regressions, full proxy coverage, and documentation exists</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Phase 8 Legacy System Migration preparation:
1. Shared proxy helper (`src/lib/api/proxy.ts`) for conditional BFF proxying
2. All 40+ route handlers updated with conditional proxy logic (mock fallback preserved)
3. middleware.ts migrated to proxy.ts (Next.js 16)
4. Environment variables documented (.env.example)
5. Playwright smoke tests for all major screens
6. Feature parity audit checklist
7. 4 decommission runbooks (Jordan's Admin, Retool, Music Vine PHP, Uppbeat PHP)
  </what-built>
  <how-to-verify>
1. **Start the app** (`npm run dev`) and verify these pages still work in mock mode:
   - Dashboard: http://localhost:3000/dashboard
   - Users list: http://localhost:3000/users
   - Assets list: http://localhost:3000/assets
   - Contributors: http://localhost:3000/contributors
   - Payees: http://localhost:3000/payees
   - Collections: http://localhost:3000/collections
   - Activity: http://localhost:3000/activity

2. **Check proxy helper** exists at `src/lib/api/proxy.ts`

3. **Review documentation:**
   - Open `docs/decommission/feature-parity-audit.md` -- does it cover your workflows?
   - Open the 4 decommission runbooks -- do the steps make sense?

4. **Run smoke tests** (in mock mode): `npm run test:e2e`
   - Tests should pass against mock data

5. **Verify no regressions:** Try a few interactions:
   - Search for a user
   - Click into an asset detail
   - Open the command palette (Cmd+K)
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. Build passes, TypeScript clean
2. All route handlers have proxy integration
3. Mock mode works identically to before
4. Smoke tests listed and runnable
5. Documentation complete
6. Human approves
</verification>

<success_criteria>
- Zero regressions in mock mode
- Full proxy coverage across all route handlers
- Smoke tests operational
- Documentation reviewed and approved
- Phase 8 ready for real backend integration when backend team delivers endpoints
</success_criteria>

<output>
After completion, create `.planning/phases/08-legacy-system-migration/08-09-SUMMARY.md`
</output>
