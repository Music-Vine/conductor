---
phase: 01-foundation-and-infrastructure
plan: 10
type: execute
wave: 5
depends_on: ["01-06", "01-07", "01-08", "01-09"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Staff can log in with email via magic link"
    - "Staff can switch between Music Vine and Uppbeat platforms"
    - "Staff actions are logged in audit trail"
    - "Forms validate on blur with visual feedback"
    - "Loading states and error boundaries work correctly"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 1 foundation is working correctly through manual testing of all authentication, platform, and UI flows.

Purpose: This ensures all Phase 1 requirements (AUTH-01 through AUTH-06, UX-05, UX-06) are met before moving to Phase 2.

Output: Verification that all flows work, any issues documented
</objective>

<execution_context>
@/Users/sambeevors/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sambeevors/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-and-infrastructure/01-CONTEXT.md
@.planning/phases/01-foundation-and-infrastructure/01-06-SUMMARY.md
@.planning/phases/01-foundation-and-infrastructure/01-09-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 1 foundation including:
- Magic link authentication flow
- Session management with 8-hour expiry
- Platform toggle (Music Vine / Uppbeat)
- Audit logging infrastructure
- Form validation components
- Loading skeletons and error boundaries
- App shell with sidebar and header
  </what-built>
  <how-to-verify>
**Setup:**
1. Ensure SESSION_SECRET is set in .env.local (generate with: `openssl rand -base64 32`)
2. Start dev server: `npm run dev`

**Test 1: Login Flow (AUTH-01, AUTH-02)**
1. Visit http://localhost:3000/ - should redirect to /login
2. Enter any email (e.g., test@example.com)
3. Click "Send magic link"
4. In development mode, a clickable link should appear
5. Click the link - should redirect to dashboard
6. Refresh page - session should persist (no redirect to login)

**Test 2: Logout (AUTH-03)**
1. Click your name in the header (top right)
2. Click "Sign out"
3. Should redirect to login page
4. Try accessing http://localhost:3000/ - should redirect to login

**Test 3: Platform Toggle (AUTH-05, AUTH-06)**
1. Log in again
2. Find the platform toggle in the sidebar (below the logo)
3. Click "Uppbeat" - theme colors should change
4. Click "Music Vine" - theme colors should change back
5. Refresh page - platform selection should persist

**Test 4: Audit Logging (AUTH-04)**
1. Open browser dev tools, Network tab
2. Perform some action (platform switch)
3. Check that POST to /api/audit occurs
4. Visit http://localhost:3000/api/audit in browser - should see logged events

**Test 5: Form Validation (UX-05)**
1. Visit /login
2. Enter an invalid email (e.g., "notanemail")
3. Click outside the input (blur)
4. Error message should appear below field with red styling
5. Fix the email - error should clear when re-validated

**Test 6: Error Boundary (UX-06)**
1. This is harder to trigger manually
2. Verify that src/app/error.tsx exists with 'use client'
3. Verify that src/app/global-error.tsx exists with html/body tags

**Test 7: Loading Skeletons (UX-06)**
1. Import and render a skeleton in a test page
2. Verify it displays with animation
  </how-to-verify>
  <resume-signal>
Type "approved" if all tests pass, or describe any issues found.
If issues are found, list them clearly with:
- Which test failed
- Expected behavior
- Actual behavior
- Any error messages
  </resume-signal>
</task>

</tasks>

<verification>
All Phase 1 success criteria verified:
1. Staff can log in with individual credentials and sessions persist for 8 hours
2. Staff can switch between Music Vine and Uppbeat contexts via toggle
3. All staff actions are logged with audit trail
4. Forms have real-time validation with clear error messages
5. Pages show proper loading states and error boundaries
</verification>

<success_criteria>
- All 7 test scenarios pass
- No console errors during normal operation
- Authentication flow works end-to-end
- Platform toggle persists and changes theme
- Audit events are captured and retrievable
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-infrastructure/01-10-SUMMARY.md`
</output>
