---
phase: 02-user-management
plan: 05
type: execute
wave: 3
depends_on: ["02-03", "02-04"]
files_modified:
  - src/app/(platform)/users/[id]/page.tsx
  - src/app/(platform)/users/[id]/components/UserDetailTabs.tsx
  - src/app/(platform)/users/[id]/loading.tsx
autonomous: true

must_haves:
  truths:
    - "User detail page exists at /users/[id]"
    - "Page shows user header with name and email"
    - "Tabbed navigation between Profile, Subscription, Downloads"
    - "Tab selection persists in URL"
  artifacts:
    - path: "src/app/(platform)/users/[id]/page.tsx"
      provides: "User detail page with server-side data"
      exports: ["default"]
    - path: "src/app/(platform)/users/[id]/components/UserDetailTabs.tsx"
      provides: "Radix tabs wrapper"
      exports: ["UserDetailTabs"]
    - path: "src/app/(platform)/users/[id]/loading.tsx"
      provides: "Loading skeleton"
  key_links:
    - from: "src/app/(platform)/users/[id]/page.tsx"
      to: "fetchUser"
      via: "server-side fetch"
      pattern: "fetchUser\\(id\\)"
    - from: "src/app/(platform)/users/[id]/components/UserDetailTabs.tsx"
      to: "@radix-ui/react-tabs"
      via: "Tabs component"
      pattern: "import.*Tabs.*@radix-ui"
---

<objective>
Create the User detail page with Radix tabs for Profile, Subscription, and Downloads sections.

Purpose: Implement the tabbed detail view per CONTEXT.md decision, showing comprehensive user information organized into logical sections.

Output: /users/[id] page with tab navigation and skeleton loading state.
</objective>

<execution_context>
@/Users/sambeevors/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sambeevors/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-user-management/02-CONTEXT.md
@.planning/phases/02-user-management/02-RESEARCH.md

@src/types/user.ts
@src/lib/api/users.ts
@src/app/(platform)/users/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create User detail page</name>
  <files>src/app/(platform)/users/[id]/page.tsx</files>
  <action>
Create React Server Component for user detail:

1. Page props interface:
   - params: Promise<{ id: string }> (Next.js 15 async)
   - searchParams: Promise<{ tab?: string }> (for active tab)

2. Await params and searchParams (Next.js 15 pattern)

3. Fetch user data server-side:
   - const user = await fetchUser(id)
   - Handle 404 with notFound() from 'next/navigation'

4. Determine active tab:
   - Default to 'profile'
   - Accept 'profile', 'subscription', 'downloads' from searchParams

5. Render page structure:
   - Back link to /users (with arrow icon)
   - User header:
     - User avatar placeholder (first letter of email in circle)
     - Name (or "No name" if null)
     - Email
     - Status badge (Active/Suspended with timestamp if suspended)
     - User ID (smaller, gray text)
   - UserDetailTabs component with user data and activeTab

Use Tailwind for layout. Gray color palette from Cadence.
  </action>
  <verify>Navigate to /users/user-1 - page renders with user info and tabs</verify>
  <done>User detail page loads and displays user header</done>
</task>

<task type="auto">
  <name>Task 2: Create UserDetailTabs with Radix</name>
  <files>src/app/(platform)/users/[id]/components/UserDetailTabs.tsx</files>
  <action>
Create client component with Radix UI Tabs:

1. 'use client' directive
2. Import * as Tabs from '@radix-ui/react-tabs'
3. Props:
   - user: UserDetail
   - activeTab: string (from server)

4. Use hooks for tab URL sync:
   - useRouter, usePathname, useSearchParams
   - handleTabChange updates URL with ?tab=X

5. Tabs structure:
   - Tabs.Root with value={activeTab} onValueChange={handleTabChange}
   - Tabs.List with horizontal layout, border-bottom
   - Three Tabs.Trigger: "Profile", "Subscription", "Downloads + Licenses"

6. Tab styling:
   - Inactive: text-gray-600
   - Active: text-gray-900, border-b-2 border-gray-900 (or platform-primary)
   - Hover: text-gray-900
   - Use data-[state=active] selector

7. Tab content areas:
   - Tabs.Content for each tab
   - forceMount={false} (default) - only mount active tab
   - Placeholder content for now: "Profile content", "Subscription content", "Downloads content"

Content components will be built in subsequent plans.
  </action>
  <verify>Click tabs - URL updates to ?tab=subscription, content area changes</verify>
  <done>Tabs switch between sections with URL persistence</done>
</task>

<task type="auto">
  <name>Task 3: Create loading skeleton</name>
  <files>src/app/(platform)/users/[id]/loading.tsx</files>
  <action>
Create loading.tsx for user detail route:

1. Import BaseSkeleton from skeletons
2. Match page structure:
   - Back link skeleton (w-20 h-4)
   - Avatar skeleton (w-16 h-16 rounded-full)
   - Name skeleton (w-48 h-6)
   - Email skeleton (w-64 h-4)
   - Status badge skeleton (w-20 h-6)
   - Tab bar skeleton (3 tabs, w-24 h-8 each)
   - Content area skeleton (several lines of varying width)

Use rounded-full for avatar skeleton.
Maintain same spacing as actual page.
  </action>
  <verify>Hard refresh /users/user-1 - skeleton appears briefly</verify>
  <done>Loading skeleton matches page layout</done>
</task>

</tasks>

<verification>
1. Navigate from /users to /users/user-1 - detail page loads
2. User header shows email, name (or placeholder), status badge
3. Click "Subscription" tab - URL becomes ?tab=subscription
4. Click "Downloads + Licenses" tab - URL becomes ?tab=downloads
5. Direct navigation to /users/user-1?tab=subscription - correct tab active
6. Back button/link returns to /users
7. Loading skeleton appears during navigation
</verification>

<success_criteria>
- /users/[id] page renders user details
- Three tabs: Profile, Subscription, Downloads + Licenses
- Tab selection synced with URL
- Back navigation to user list
- Loading skeleton during fetch
- User header shows key info (email, name, status)
</success_criteria>

<output>
After completion, create `.planning/phases/02-user-management/02-05-SUMMARY.md`
</output>
